export CARGO_NET_GIT_FETCH_WITH_CLI=true
export SSL_CERT_FILE=/var/cache/ca-certs/anchors/ca-certificates.crt
export CARGO_HTTP_CAINFO=/var/cache/ca-certs/anchors/ca-certificates.crt
export CC=clang
export CXX=clang++
export CC_x86_64_unknown_linux_gnu=clang
export CXX_x86_64_unknown_linux_gnu=clang++
export AR=/usr/bin/llvm-ar
export RANLIB=/usr/bin/llvm-ranlib
export NM=/usr/bin/llvm-nm
export AR_x86_64_unknown_linux_gnu=/usr/bin/llvm-ar
export RANLIB_x86_64_unknown_linux_gnu=/usr/bin/llvm-ranlib
export NM_x86_64_unknown_linux_gnu=/usr/bin/llvm-nm
export CRATE_CC_NO_DEFAULTS=1
export CARGO_BUILD_JOBS=16
export RUSTC_BOOTSTRAP=1
export LLVM_PROFILE_FILE="/var/tmp/pgo/code-%p-%m.profraw"


# flto=thin lto=thin codegen=1
export RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=thin -Clinker-plugin-lto=on -Clink-arg=-flto=thin -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Coverflow-checks=off -Cpanic=abort -Cprefer-dynamic=no -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=thin -Clinker-plugin-lto=on -Clink-arg=-flto=thin -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2 -Coverflow-checks=off -Cpanic=abort -Cprefer-dynamic=no"
export CARGO_HOST_RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clinker-plugin-lto=on -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=-crt-static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2 -Coverflow-checks=off -Cpanic=abort -Cprefer-dynamic=no"


# flto=thin lto=thin codegen=4
export RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=thin -Clinker-plugin-lto=on -Clink-arg=-flto=thin -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=4 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=thin -Clinker-plugin-lto=on -Clink-arg=-flto=thin -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=4 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_HOST_RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=thin -Clinker-plugin-lto=on -Clink-arg=-flto=thin -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=4 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"


# flto=full lto=fat codegen=1
export RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_HOST_RUSTFLAGS="-Zfp-math=fast -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"

# flto=full lto=fat codegen=1 NO FFAST-MATH
export RUSTFLAGS="-Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_RUSTFLAGS="-Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_HOST_RUSTFLAGS="-Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"


# flto=full lto=fat codegen=1  -Zfp-math=allow_reassoc,no_signed_zeros,allow_reciprocal,allow_contract,approx_func
export RUSTFLAGS="-Zfp-math=allow_reassoc,no_signed_zeros,allow_reciprocal,allow_contract,approx_func -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_RUSTFLAGS="-Zfp-math=allow_reassoc,no_signed_zeros,allow_reciprocal,allow_contract,approx_func -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_HOST_RUSTFLAGS="-Zfp-math=allow_reassoc,no_signed_zeros,allow_reciprocal,allow_contract,approx_func -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=fat -Clinker-plugin-lto=on -Clink-arg=-flto=full -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"


# flto=thin lto=thin codegen=1  -Zfp-math=allow_reassoc,no_signed_zeros,allow_reciprocal,allow_contract,approx_func
export RUSTFLAGS="-Zfp-math=allow_reassoc,no_signed_zeros,allow_reciprocal,allow_contract,approx_func -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=thin -Clinker-plugin-lto=on -Clink-arg=-flto=thin -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_RUSTFLAGS="-Zfp-math=allow_reassoc,no_signed_zeros,allow_reciprocal,allow_contract,approx_func -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=thin -Clinker-plugin-lto=on -Clink-arg=-flto=thin -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"
export CARGO_HOST_RUSTFLAGS="-Zfp-math=allow_reassoc,no_signed_zeros,allow_reciprocal,allow_contract,approx_func -Clink-arg=-ffast-math -Znew-llvm-pass-manager=yes -Clink-arg=-fno-legacy-pass-manager -Clink-arg=-Wl,--mllvm=-enable-npm-pgo-inline-deferral -Clink-arg=-Wl,--mllvm=-relocation-model=static -Clto=thin -Clinker-plugin-lto=on -Clink-arg=-flto=thin -Zunstable-options -Clinker=clang -Clink-arg=-fuse-ld=lld -Copt-level=3 -Ccodegen-units=1 -Cpanic=abort -Cembed-bitcode=yes -L. --verbose -Clink-arg=--verbose -Ctarget-feature=+crt-static -Crelocation-model=static -Cinline-threshold=29000 -Clink-arg=-g3 -Clink-arg=-DNDEBUG -Cdebug-assertions=no -Cdebuginfo=2"




cargo bench -Zunstable-options -Zbinary-dep-depinfo -Zhost-config -Ztarget-applies-to-host --jobs 16 -vv --target x86_64-unknown-linux-gnu --features wide wide
 --emit llvm-ir,link


